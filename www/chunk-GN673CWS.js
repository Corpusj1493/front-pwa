import{C as j,D as z,G as B,H as F,K as H,d as _,e as S,f as x,g as M,h as P,i as y,j as D,k as O,l as E,m as k,n as A,q as w,r as U,s as L,t as T}from"./chunk-NZTSZEPZ.js";import"./chunk-DBLGMTO4.js";import"./chunk-QUJFQN2Y.js";import"./chunk-O52IKJVK.js";import"./chunk-OQJCXMAZ.js";import"./chunk-VL6F45B6.js";import"./chunk-EU7FQ5IA.js";import"./chunk-STP2TL6J.js";import"./chunk-TCRGSDKV.js";import"./chunk-7FY2OE2O.js";import"./chunk-VBVQFYTF.js";import"./chunk-5EGKW7JY.js";import"./chunk-DM6TJFWJ.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-D7QNDGRV.js";import"./chunk-CKP3SGE2.js";import"./chunk-3IBBKVJY.js";import{a as b}from"./chunk-URCPBER3.js";import"./chunk-DADNZVRM.js";import{Ga as v,H as s,L as c,N as h,Na as I,W as g,X as e,Y as t,Z as r,ea as C,ma as i,na as d,oa as f}from"./chunk-3YJH32OC.js";import"./chunk-Z6NEOT2M.js";import"./chunk-MSMJJC2X.js";import"./chunk-53OGNGEH.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-M2X7KQLB.js";import"./chunk-REYR55MP.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{e as p}from"./chunk-JHI3MBHO.js";var Q=(()=>{let l=class l{constructor(a,o,n,u){this.authService=a,this.router=o,this.alertController=n,this.loadingController=u,this.userData=null}ngOnInit(){this.loadUserData()}loadUserData(){this.userData=this.authService.getUserData(),console.log("Datos de usuario cargados:",this.userData)}logout(){return p(this,null,function*(){yield(yield this.alertController.create({header:"Confirmar Cierre de Sesi\xF3n",message:"\xBFEst\xE1s seguro de que deseas salir de tu cuenta?",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary"},{text:"Cerrar Sesi\xF3n",cssClass:"danger",handler:()=>{this.executeLogoutAction()}}]})).present()})}executeLogoutAction(){return p(this,null,function*(){let a=yield this.loadingController.create({message:"Cerrando sesi\xF3n..."});yield a.present(),this.authService.logout().subscribe({next:()=>{console.log("Sesi\xF3n cerrada en el backend y token eliminado localmente."),this.router.navigateByUrl("/login",{replaceUrl:!0})},error:o=>{console.error("Error al contactar el backend. Forzando limpieza local.",o),localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),this.router.navigateByUrl("/login",{replaceUrl:!0})},complete:()=>{a.dismiss()}})})}};l.\u0275fac=function(o){return new(o||l)(c(b),c(I),c(B),c(F))},l.\u0275cmp=h({type:l,selectors:[["app-profile"]],decls:49,vars:6,consts:[[3,"translucent"],["color","primary"],["slot","end"],[3,"click"],["slot","icon-only","name","log-out-outline","color","light"],[3,"fullscreen"],[1,"ion-padding"],[1,"user-card"],[1,"profile-header"],["name","person-circle-outline","size","large"],["lines","full"],["slot","start","name","mail-outline","color","medium"],["slot","start","name","person-outline","color","medium"],["lines","full",1,"options-list"],["button","","detail",""],["slot","start","name","settings-outline","color","secondary"],["slot","start","name","help-circle-outline","color","secondary"],["expand","block","color","danger",1,"ion-margin-top",3,"click"],["slot","start","name","log-out-outline"]],template:function(o,n){o&1&&(e(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title"),i(3,"\u{1F464} Mi Perfil"),t(),e(4,"ion-buttons",2)(5,"ion-button",3),C("click",function(){return n.logout()}),r(6,"ion-icon",4),t()()()(),e(7,"ion-content",5)(8,"div",6)(9,"ion-card",7)(10,"ion-card-header")(11,"div",8)(12,"ion-avatar"),r(13,"ion-icon",9),t(),e(14,"div")(15,"ion-card-title"),i(16),t(),e(17,"ion-card-subtitle"),i(18),t()()()(),e(19,"ion-card-content")(20,"ion-list",10)(21,"ion-item"),r(22,"ion-icon",11),e(23,"ion-label")(24,"p"),i(25,"Correo Electr\xF3nico"),t(),e(26,"h3"),i(27),t()()(),e(28,"ion-item"),r(29,"ion-icon",12),e(30,"ion-label")(31,"p"),i(32,"Nombre de Usuario"),t(),e(33,"h3"),i(34),t()()()()()(),e(35,"ion-list-header"),i(36,"Opciones de la Aplicaci\xF3n"),t(),e(37,"ion-list",13)(38,"ion-item",14),r(39,"ion-icon",15),e(40,"ion-label"),i(41,"Ajustes"),t()(),e(42,"ion-item",14),r(43,"ion-icon",16),e(44,"ion-label"),i(45,"Ayuda y Soporte"),t()()(),e(46,"ion-button",17),C("click",function(){return n.logout()}),r(47,"ion-icon",18),i(48," Cerrar Sesi\xF3n "),t()()()),o&2&&(g("translucent",!0),s(7),g("fullscreen",!0),s(9),f("Bienvenido, ",(n.userData==null?null:n.userData.name)||"Usuario"),s(2),d((n.userData==null?null:n.userData.email)||"Cargando datos..."),s(9),d((n.userData==null?null:n.userData.email)||"N/A"),s(7),d((n.userData==null?null:n.userData.name)||"N/A"))},dependencies:[H,_,S,x,M,P,y,D,O,E,k,A,w,U,L,T,j,z,v],styles:["ion-content[_ngcontent-%COMP%]{--background: #f4f5f8}.user-card[_ngcontent-%COMP%]{box-shadow:0 4px 12px #00000014;border-radius:12px;margin-top:10px}.profile-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;padding:10px 0}.profile-header[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{width:60px;height:60px;background:var(--ion-color-secondary-tint)}.profile-header[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:3em;color:var(--ion-color-secondary)}.profile-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:1.3em;font-weight:700}.profile-header[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{color:var(--ion-color-medium)}.options-list[_ngcontent-%COMP%]{margin-top:20px}.options-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{border-radius:8px;margin-bottom:5px;--inner-padding-end: 0}.logout-item[_ngcontent-%COMP%]{margin-top:15px;--color: #fff}.logout-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-weight:700}"]});let m=l;return m})();export{Q as ProfilePage};
