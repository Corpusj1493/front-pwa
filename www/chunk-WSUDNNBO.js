import{A as Q,C as X,D as Z,E as $,F as ee,G as te,K as ne,c as A,e as O,f as q,g as j,h as V,l as z,m as H,n as U,p as G,q as K,r as Y,u as J}from"./chunk-NZTSZEPZ.js";import"./chunk-DBLGMTO4.js";import"./chunk-QUJFQN2Y.js";import"./chunk-O52IKJVK.js";import"./chunk-OQJCXMAZ.js";import"./chunk-VL6F45B6.js";import"./chunk-EU7FQ5IA.js";import"./chunk-STP2TL6J.js";import"./chunk-TCRGSDKV.js";import"./chunk-7FY2OE2O.js";import"./chunk-VBVQFYTF.js";import"./chunk-5EGKW7JY.js";import"./chunk-DM6TJFWJ.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-D7QNDGRV.js";import"./chunk-CKP3SGE2.js";import"./chunk-3IBBKVJY.js";import{a as N}from"./chunk-URCPBER3.js";import"./chunk-DADNZVRM.js";import{Ca as D,Ga as P,H as r,L as _,N as b,Na as E,Oa as v,Qa as L,R as h,W as u,X as t,Y as o,Z as m,ea as C,fa as S,l as M,ma as d,na as w,qa as g,qb as R,ra as c,rb as x,sa as p,sb as W,tb as T,ub as k,va as I,xb as B,zb as F}from"./chunk-3YJH32OC.js";import"./chunk-Z6NEOT2M.js";import"./chunk-MSMJJC2X.js";import"./chunk-53OGNGEH.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-M2X7KQLB.js";import"./chunk-REYR55MP.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{e as y}from"./chunk-JHI3MBHO.js";var oe=()=>["/login"];function re(a,l){if(a&1&&(t(0,"ion-note",26),d(1),o()),a&2){let ie=S();r(),w(ie.errorMessage)}}function ae(a,l){a&1&&m(0,"ion-spinner",27)}function se(a,l){a&1&&(t(0,"span"),d(1,"Registrarse"),o())}var Me=(()=>{let l=class l{constructor(i,s,e){this.authService=i,this.router=s,this.alertController=e,this.userData={name:"",last_name:"",email:"",password:"",password_confirmation:""},this.isLoading=!1,this.errorMessage=null}register(){if(this.isLoading=!0,this.errorMessage=null,this.userData.password!==this.userData.password_confirmation){this.errorMessage="Las contrase\xF1as no coinciden.",this.isLoading=!1;return}this.authService.register(this.userData).pipe(M(()=>{this.isLoading=!1})).subscribe({next:i=>{i.success&&(this.presentSuccessAlert(),this.router.navigateByUrl("/tabs/explore",{replaceUrl:!0}))},error:i=>{i.status===422&&i.error&&i.error.errors?this.formatValidationErrors(i.error.errors):this.errorMessage="Ocurri\xF3 un error inesperado. Int\xE9ntalo de nuevo."}})}presentSuccessAlert(){return y(this,null,function*(){yield(yield this.alertController.create({header:"\xA1Registro Exitoso!",message:"Tu cuenta ha sido creada. \xA1Bienvenido!",buttons:["OK"]})).present()})}formatValidationErrors(i){let s=[];for(let e in i)i.hasOwnProperty(e)&&(s=s.concat(i[e]));this.errorMessage=s.join(", ")}};l.\u0275fac=function(s){return new(s||l)(_(N),_(E),_(te))},l.\u0275cmp=b({type:l,selectors:[["app-register"]],decls:41,vars:12,consts:[[3,"translucent"],["color","primary"],["slot","start"],["defaultHref","/login"],[1,"ion-padding","custom-background"],[1,"register-container"],[1,"ion-text-center","ion-margin-bottom"],["name","person-add-outline","size","large","color","secondary"],[1,"modern-card"],[3,"ngSubmit"],["fill","solid","shape","round",1,"ion-margin-bottom"],["name","person-outline","slot","start","color","medium"],["label","Nombre","type","text","labelPlacement","floating","name","name","required","",3,"ngModelChange","ngModel"],["label","Apellido","type","text","labelPlacement","floating","name","last_name","required","",3,"ngModelChange","ngModel"],["name","mail-outline","slot","start","color","medium"],["label","Correo Electr\xF3nico","type","email","labelPlacement","floating","name","email","required","",3,"ngModelChange","ngModel"],["name","lock-closed-outline","slot","start","color","medium"],["label","Contrase\xF1a (m\xEDn. 8 caracteres)","type","password","labelPlacement","floating","name","password","required","",3,"ngModelChange","ngModel"],["name","key-outline","slot","start","color","medium"],["label","Confirmar Contrase\xF1a","type","password","labelPlacement","floating","name","password_confirmation","required","",3,"ngModelChange","ngModel"],["color","danger","class","ion-padding-start",4,"ngIf"],["expand","block","shape","round","type","submit","color","secondary",1,"ion-margin-top",3,"disabled"],["name","crescent",4,"ngIf"],[4,"ngIf"],[1,"ion-text-center","ion-margin-top"],["fill","clear","color","primary",3,"routerLink"],["color","danger",1,"ion-padding-start"],["name","crescent"]],template:function(s,e){s&1&&(t(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),m(3,"ion-back-button",3),o(),t(4,"ion-title"),d(5,"Crear Cuenta"),o()()(),t(6,"ion-content",4)(7,"div",5)(8,"div",6),m(9,"ion-icon",7),t(10,"h2"),d(11,"\xDAnete a la Comunidad"),o(),t(12,"p"),d(13,"Reg\xEDstrate para empezar a compartir rese\xF1as."),o()(),t(14,"ion-card",8)(15,"ion-card-content")(16,"form",9),C("ngSubmit",function(){return e.register()}),t(17,"ion-item",10),m(18,"ion-icon",11),t(19,"ion-input",12),p("ngModelChange",function(n){return c(e.userData.name,n)||(e.userData.name=n),n}),o()(),t(20,"ion-item",10),m(21,"ion-icon",11),t(22,"ion-input",13),p("ngModelChange",function(n){return c(e.userData.last_name,n)||(e.userData.last_name=n),n}),o()(),t(23,"ion-item",10),m(24,"ion-icon",14),t(25,"ion-input",15),p("ngModelChange",function(n){return c(e.userData.email,n)||(e.userData.email=n),n}),o()(),t(26,"ion-item",10),m(27,"ion-icon",16),t(28,"ion-input",17),p("ngModelChange",function(n){return c(e.userData.password,n)||(e.userData.password=n),n}),o()(),t(29,"ion-item",10),m(30,"ion-icon",18),t(31,"ion-input",19),p("ngModelChange",function(n){return c(e.userData.password_confirmation,n)||(e.userData.password_confirmation=n),n}),o()(),h(32,re,2,1,"ion-note",20),t(33,"ion-button",21),h(34,ae,1,0,"ion-spinner",22)(35,se,2,0,"span",23),o()()()(),t(36,"div",24)(37,"ion-label"),d(38,"\xBFYa tienes una cuenta?"),o(),t(39,"ion-button",25),d(40," Iniciar Sesi\xF3n "),o()()()()),s&2&&(u("translucent",!0),r(19),g("ngModel",e.userData.name),r(3),g("ngModel",e.userData.last_name),r(3),g("ngModel",e.userData.email),r(3),g("ngModel",e.userData.password),r(3),g("ngModel",e.userData.password_confirmation),r(),u("ngIf",e.errorMessage),r(),u("disabled",e.isLoading),r(),u("ngIf",e.isLoading),r(),u("ngIf",!e.isLoading),r(4),u("routerLink",I(11,oe)))},dependencies:[ne,O,q,j,V,z,H,U,G,K,Y,J,Q,X,Z,A,$,ee,P,D,F,k,R,x,B,T,W,L,v],styles:[".custom-background[_ngcontent-%COMP%]{--ion-background-color: var(--ion-color-light, #f4f5f8)}.register-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%;max-width:450px;margin:0 auto}.modern-card[_ngcontent-%COMP%]{width:100%;box-shadow:0 4px 20px #00000014;border-radius:12px}ion-item[_ngcontent-%COMP%]{--border-radius: 8px;--min-height: 50px;--inner-padding-end: 16px}"]});let a=l;return a})();export{Me as RegisterPage};
