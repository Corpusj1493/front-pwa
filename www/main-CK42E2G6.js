import{b as $}from"./chunk-NZXRBLAM.js";import{a as z,b as G,q as Z}from"./chunk-I4WRMRUL.js";import{a as q}from"./chunk-URCPBER3.js";import{a as T}from"./chunk-DADNZVRM.js";import{B as N,Ha as x,J as A,Ja as L,Ka as V,Ma as B,N as U,Pa as H,Sb as K,T as _,U as M,X as F,Y as j,Z as W,a as w,b as E,e as u,i as p,j as y,k as h,m,o as d,p as D,r as C,t as R,u as S,v as l,w as I,x as k}from"./chunk-3YJH32OC.js";import"./chunk-Y2PDZ72K.js";import"./chunk-Z6NEOT2M.js";import"./chunk-MSMJJC2X.js";import"./chunk-53OGNGEH.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-REYR55MP.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{a as P}from"./chunk-JHI3MBHO.js";var Y=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",loadComponent:()=>import("./chunk-UXT4WT5A.js").then(t=>t.LoginPage)},{path:"register",loadComponent:()=>import("./chunk-WSUDNNBO.js").then(t=>t.RegisterPage)},{path:"tabs",loadChildren:()=>import("./chunk-WW2SF3IJ.js").then(t=>t.routes)},{path:"**",redirectTo:"login",pathMatch:"full"},{path:"profile",loadComponent:()=>import("./chunk-GN673CWS.js").then(t=>t.ProfilePage)},{path:"place-detail",loadComponent:()=>import("./chunk-2Z2LHX5K.js").then(t=>t.PlaceDetailPage)},{path:"profile-edit",loadComponent:()=>import("./chunk-N77RJGQZ.js").then(t=>t.ProfileEditPage)},{path:"user-form-modal",loadComponent:()=>import("./chunk-JU4IFBNV.js").then(t=>t.UserFormModalPage)}];var J=(()=>{let n=class n{constructor(){}};n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=U({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(e,i){e&1&&(F(0,"ion-app"),W(1,"ion-router-outlet"),j())},dependencies:[G,z],encapsulation:2});let t=n;return t})();var O="Service workers are disabled or not supported by this browser",g=class{serviceWorker;worker;registration;events;constructor(n,o){if(this.serviceWorker=n,!n)this.worker=this.events=this.registration=new w(r=>r.error(new d(5601,!1)));else{let r=null,e=new E;this.worker=new w(a=>(r!==null&&a.next(r),e.subscribe(b=>a.next(b))));let i=()=>{let{controller:a}=n;a!==null&&(r=a,e.next(r))};n.addEventListener("controllerchange",i),i(),this.registration=this.worker.pipe(m(()=>n.getRegistration().then(a=>{if(!a)throw new d(5601,!1);return a})));let s=new E;this.events=s.asObservable();let c=a=>{let{data:b}=a;b?.type&&s.next(b)};n.addEventListener("message",c),o?.get(M,null,{optional:!0})?.onDestroy(()=>{n.removeEventListener("controllerchange",i),n.removeEventListener("message",c)})}}postMessage(n,o){return new Promise(r=>{this.worker.pipe(h(1)).subscribe(e=>{e.postMessage(P({action:n},o)),r()})})}postMessageWithOperation(n,o,r){let e=this.waitForOperationCompleted(r),i=this.postMessage(n,o);return Promise.all([i,e]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(n){let o;return typeof n=="string"?o=r=>r.type===n:o=r=>n.includes(r.type),this.events.pipe(y(o))}nextEventOfType(n){return this.eventsOfType(n).pipe(h(1))}waitForOperationCompleted(n){return new Promise((o,r)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(y(e=>e.nonce===n),h(1),u(e=>{if(e.result!==void 0)return e.result;throw new Error(e.error)})).subscribe({next:o,error:r})})}get isEnabled(){return!!this.serviceWorker}},ne=(()=>{class t{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new E;constructor(o){if(this.sw=o,!o.isEnabled){this.messages=p,this.notificationClicks=p,this.notificationCloses=p,this.pushSubscriptionChanges=p,this.subscription=p;return}this.messages=this.sw.eventsOfType("PUSH").pipe(u(e=>e.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(u(e=>e.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(u(e=>e.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(u(e=>e.data)),this.pushManager=this.sw.registration.pipe(u(e=>e.pushManager));let r=this.pushManager.pipe(m(e=>e.getSubscription()));this.subscription=new w(e=>{let i=r.subscribe(e),s=this.subscriptionChanges.subscribe(e);return()=>{i.unsubscribe(),s.unsubscribe()}})}requestSubscription(o){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(O));let r={userVisibleOnly:!0},e=this.decodeBase64(o.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),i=new Uint8Array(new ArrayBuffer(e.length));for(let s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return r.applicationServerKey=i,new Promise((s,c)=>{this.pushManager.pipe(m(f=>f.subscribe(r)),h(1)).subscribe({next:f=>{this.subscriptionChanges.next(f),s(f)},error:c})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(O));let o=r=>{if(r===null)throw new d(5602,!1);return r.unsubscribe().then(e=>{if(!e)throw new d(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((r,e)=>{this.subscription.pipe(h(1),m(o)).subscribe({next:r,error:e})})}decodeBase64(o){return atob(o)}static \u0275fac=function(r){return new(r||t)(S(g))};static \u0275prov=C({token:t,factory:t.\u0275fac})}return t})(),oe=(()=>{class t{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(o){if(this.sw=o,!o.isEnabled){this.versionUpdates=p,this.unrecoverable=p;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(O));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let o=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:o},o).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new d(5601,!1));let o=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:o},o)}static \u0275fac=function(r){return new(r||t)(S(g))};static \u0275prov=C({token:t,factory:t.\u0275fac})}return t})();var X=new R("");function ie(){let t=l(v);if(!("serviceWorker"in navigator&&t.enabled!==!1))return;let n=l(X),o=l(A),r=l(M);o.runOutsideAngular(()=>{let e=navigator.serviceWorker,i=()=>e.controller?.postMessage({action:"INITIALIZE"});e.addEventListener("controllerchange",i),r.onDestroy(()=>{e.removeEventListener("controllerchange",i)})}),o.runOutsideAngular(()=>{let e,{registrationStrategy:i}=t;if(typeof i=="function")e=new Promise(s=>i().subscribe(()=>s()));else{let[s,...c]=(i||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":e=Promise.resolve();break;case"registerWithDelay":e=Q(+c[0]||0);break;case"registerWhenStable":e=Promise.race([r.whenStable(),Q(+c[0])]);break;default:throw new d(5600,!1)}}e.then(()=>{r.destroyed||navigator.serviceWorker.register(n,{scope:t.scope,updateViaCache:t.updateViaCache,type:t.type}).catch(s=>console.error(D(5604,!1)))})})}function Q(t){return new Promise(n=>setTimeout(n,t))}function se(t,n){return new g(t.enabled!==!1?navigator.serviceWorker:void 0,n)}var v=class{enabled;updateViaCache;type;scope;registrationStrategy};function ee(t,n={}){return I([ne,oe,{provide:X,useValue:t},{provide:v,useValue:n},{provide:g,useFactory:se,deps:[v,N]},_(ie)])}var te=(t,n)=>{let r=l(q).getToken(),e=t;return r&&(e=t.clone({setHeaders:{Authorization:`Bearer ${r}`}})),n(e)};T.production&&void 0;x(J,{providers:[{provide:B,useClass:K},Z(),H(Y),ee("ngsw-worker.js",{enabled:T.production,registrationStrategy:"registerWhenStable:30000"}),k($),L(V([te]))]});
